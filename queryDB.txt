USE DB gestioneEventi;

CREATE TABLE user(
	id INT AUTO_INCREMENT PRIMARY KEY,
	username VARCHAR(255) UNIQUE NOT NULL ,
	password VARCHAR(255) NOT NULL
);


CREATE TABLE evento(
	id INT AUTO_INCREMENT PRIMARY KEY,
	dataOraScadenza VARCHAR(255) NOT NULL,
	tipologia VARCHAR(255) NOT NULL,
	stato VARCHAR(255) NOT NULL,
	titolo VARCHAR(255) NOT NULL,
	descrizione VARCHAR(255) NOT NULL,
	posizione VARCHAR(255) NOT NULL,
	idUser INT NOT NULL,
    FOREIGN KEY (idUser) REFERENCES user(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);

CREATE TABLE invitare(
    stato VARCHAR(255) DEFAULT 'IN ATTESA',
    idEvento INT NOT NULL,
    idUser INT NOT NULL,
    FOREIGN KEY (idEvento) REFERENCES evento(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (idUser) REFERENCES user(id) ON DELETE CASCADE ON UPDATE CASCADE,
    PRIMARY KEY (idEvento, idUser)
);

CREATE TABLE immagine(
	id INT AUTO_INCREMENT PRIMARY KEY,
	link TEXT NOT NULL,
	idEvento INT NOT NULL,
	FOREIGN KEY (idEvento) REFERENCES evento(id)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);